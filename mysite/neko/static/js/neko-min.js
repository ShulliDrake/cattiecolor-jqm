NK={};NK.models={};NK.views={};$(function(){$(".carousel").carousel("pause");var a=new NK.views.colorTable({el:$(".colors"),model:new NK.models.tabsModel})});NK.models.tabsModel=Backbone.Model.extend({defaults:{currentTab:"shirt",currentCat:null,shirtColor:"#000",shirtColorName:"Black",tieColor:"#fff",tieColorName:"White",previewColor:"#fff",previewColorName:"",catSelector:{shirt:".shirt",tie:".tie"}},setCurrentTab:function(a){this.set("currentTab",a)},setCat:function(a){this.set("currentCat",a)},setColor:function(a,b){if(this.get("currentTab")=="shirt"){this.set("shirtColor",a);this.set("shirtColorName",b)}else{this.set("tieColor",a);this.set("tieColorName",b)}},setPreviewColor:function(a,b){this.set("previewColor",a);this.set("previewColorName",b);this.trigger("ColorChanged")}});NK.views.colorTable=Backbone.View.extend({events:{"click .tabs li":"switchTab","click .tabcontent li span":"setCurrentColor","mouseover .tabcontent li":"changeColor","mouseleave .tabcontent":"resetColor"},initialize:function(){this.model.bind("ColorChanged",this.updatePreviewColor,this);this.model.bind("change:shirtColor",this.updateShirtColor,this);this.model.bind("change:tieColor",this.updateTieColor,this)},switchTab:function(a){if(a&&a.target){$(a.target).addClass("current");$(a.target).siblings().removeClass("current");this.model.setCurrentTab(a.target.id)}},updateShirtColor:function(){var a=this.model.get("shirtColor");var b=this.model.get("catSelector");$(b.shirt,".color_label").text(this.model.get("previewColorName"));$(".cat_bg").css("background","-webkit-gradient(linear, 50% 0%, 50% 100%, from(#ffffff), to("+a+"))");$(".cat_bg").css("background-color",a)},updateTieColor:function(){var a=this.model.get("tieColor");$("#tie_block .tie_top, #tie_block .tie_bottom").css("border-color",a+" transparent transparent");$("#tie_block .tie_center").css("border-color","transparent transparent "+a+" transparent")},updatePreviewColor:function(){var b=this.model.get("currentTab");var a=this.model.get("catSelector");$(a[b],".cat .color_label").text(this.model.get("previewColorName"));if(b=="tie"){$("#tie_block .tie_top, #tie_block .tie_bottom").css("border-color",this.model.get("previewColor")+" transparent transparent transparent");$("#tie_block .tie_center").css("border-color","transparent transparent "+this.model.get("previewColor")+" transparent")}else{$(".cat_bg").css("background","-webkit-gradient(linear, 50% 0%, 50% 100%, from(#ffffff), to("+this.model.get("previewColor")+"))");$(".cat_bg").css("background-color",this.model.get("previewColor"))}},setCurrentColor:function(a){if(a&&a.target){var b=this.model.get("currentTab");this.$(".tabcontent ."+b).parent().removeClass("selected");this.$(".tabcontent ."+b).removeClass(b);$(a.target).parent("li").addClass("selected");$(a.target).addClass(b);this.model.setColor(a.target.parentNode.id,$(a.target.parentNode).data("name"))}},changeColor:function(a){if(a&&a.target){if(!a.target.id){a.target=a.target.parentNode}if(a.target.id){this.model.setPreviewColor(a.target.id,$(a.target).data("name"))}}},resetColor:function(){var a=this.model.get("catSelector");$(a.shirt,".color_label").text(this.model.get("shirtColorName"));$(a.tie,".color_label").text(this.model.get("tieColorName"));$(".cat_bg").css("background","-webkit-gradient(linear, 50% 0%, 50% 100%, from(#ffffff), to("+this.model.get("shirtColor")+"))");$(".cat_bg").css("background-color",this.model.get("shirtColor"));$("#tie_block .tie_top, #tie_block .tie_bottom").css("border-color",this.model.get("tieColor")+" transparent transparent");$("#tie_block .tie_center").css("border-color","transparent transparent "+this.model.get("tieColor")+" transparent")}});